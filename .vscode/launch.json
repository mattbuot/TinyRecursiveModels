{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python Debugger: Current File",
            "type": "debugpy",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal"
        },
        {
            "name": "Debug Pretrain TRM Maze",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/pretrain.py",
            "console": "integratedTerminal",
            "args": [
                "arch=trm",
                "data_paths=[data/maze-30x30-hard-1k]",
                "evaluators=[]",
                "epochs=500",
                "eval_interval=50",
                "global_batch_size=1536",
                "lr=2e-4",
                "puzzle_emb_lr=2e-4",
                "weight_decay=1.0",
                "puzzle_emb_weight_decay=1.0",
                "arch.L_layers=2",
                "arch.H_cycles=3",
                "arch.L_cycles=4",
                //"+run_name=${run_name}",
                "ema=True"
            ],
            "env": {
                // "run_name": "debug-run"
                "DISABLE_COMPILE": "1"
            },
            "justMyCode": false
        },
        {
            "name": "Debug Pretrain TRM ARC AGI-1",
            "type": "debugpy",
            "request": "launch",
            "module": "torch.distributed.launch",
            // "module": "pretrain",
            "console": "integratedTerminal",
            "args": [
                "--use_env",
                "--nproc-per-node",
                "4",
                "--rdzv_backend",
                "c10d",
                "--rdzv_endpoint",
                "localhost:0",
                "--nnodes",
                "1",
                "pretrain.py",
                "arch=trm",
                "data_paths=[data/arc1concept-aug-10]",
                "epochs=50",
                "eval_interval=5",
                "global_batch_size=192",
                "hidden_dim=128",
                // "lr=2e-4",
                // "puzzle_emb_lr=2e-4",
                // "weight_decay=1.0",
                "puzzle_emb_weight_decay=1.0",
                "arch.L_layers=2",
                "arch.H_cycles=3",
                "arch.L_cycles=4",
                //"+run_name=${run_name}",
                "ema=True"
            ],
            "env": {
                // "run_name": "debug-run"
                // "DISABLE_COMPILE": "1"
            },
            "justMyCode": false
        },
        {
            "name": "Debug Pretrain TRM ARC AGI-2",
            "type": "debugpy",
            "request": "launch",
            "module": "torch.distributed.launch",
            // "module": "pretrain",
            "console": "integratedTerminal",
            "args": [
                "--use_env",
                "--nproc-per-node",
                "8",
                "--rdzv_backend",
                "c10d",
                "--rdzv_endpoint",
                "localhost:0",
                "--nnodes",
                "1",
                "pretrain.py",
                "arch=trmjd",
                "data_paths=[data/arc2eval-aug-200]",
                "epochs=4000",
                "eval_interval=800",
                "global_batch_size=768",
                "arch.hidden_size=512",
                "arch.halt_max_steps=8",
                "lr=2e-4",
                // "puzzle_emb_lr=2e-4",
                // "weight_decay=1.0",
                "puzzle_emb_weight_decay=1.0",
                "arch.L_layers=2",
                "arch.H_cycles=4",
                "arch.L_cycles=4",
                "arch.loss.differential_loss=True",
                "+load_checkpoint=checkpoints/downloaded/Sanjin2024_TinyRecursiveModels-ARC-AGI-2/step_217602",
                "+project_name=trmjd",
                //"+run_name=${run_name}",
                "ema=True",
                //"+no_wandb=True",
                //"+grad_aggregation=stack_internal_losses",
                //"+grad_n_groups=10"
            ],
            "env": {
                // "run_name": "debug-run"
                // "DISABLE_COMPILE": "1"
            },
            "justMyCode": false
        },
        {
            "name": "Debug Pretrain TRM ARC AGI-2 - (no torch distributed)",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/pretrain.py",
            // "module": "pretrain",
            "console": "integratedTerminal",
            "args": [
                "arch=trmjd",
                "data_paths=[data/arc2eval-aug-200]",
                "epochs=4000",
                "eval_interval=800",
                "global_batch_size=192",
                "arch.hidden_size=512",
                "arch.halt_max_steps=8",
                "lr=2e-4",
                // "puzzle_emb_lr=2e-4",
                // "weight_decay=1.0",
                "puzzle_emb_weight_decay=1.0",
                "arch.L_layers=2",
                "arch.H_cycles=2",
                "arch.L_cycles=2",
                "arch.loss.differential_loss=True",
                "+load_checkpoint=checkpoints/downloaded/Sanjin2024_TinyRecursiveModels-ARC-AGI-2/step_217602",
                "+intermediate_loss_weight=0.0001",
                //"+load_checkpoint=checkpoints/my_saves/lambda_arc2eval-aug-200_H4_L3_hid512_lr1e-04_continue/step_28644",
                "+project_name=trmjd",
                //"+run_name=${run_name}",
                "ema=True",
                //"+no_wandb=True",
                "+grad_aggregation=stack_internal_losses",
                //"+grad_n_groups=10"
            ],
            "env": {
                // "run_name": "debug-run"
                // "DISABLE_COMPILE": "1"
            },
            "justMyCode": false
        },
        {
            "name": "Debug Generate ARC AGI-1 Dataset",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/dataset/build_arc_dataset.py",
            "console": "integratedTerminal",
            "args": [
                "--input-file-prefix",
                "kaggle/combined/arc-agi",
                "--output-dir",
                "data/arc1concept-aug-0",
                "--subsets",
                "training",
                "evaluation",
                "concept",
                "--test-set-name",
                "evaluation",
                "--num-aug",
                "0"
            ],
            "justMyCode": false
        },
    ]
}